---
title: "data-vis-presentation"
format: 
  revealjs:
    theme: league
    slide-number: c/t
    css: style.css
---







```{r}

library(leaflet)
library(leaflet.providers)
library(readabs)
library(ggplot2)
library(highcharter)
library(tidyr)
library(dplyr)
library(sf)


lat = -37.730202
lon = 145.042387

basemap <- leaflet() %>%
  addProviderTiles("CartoDB.Positron", group = 'Default') |>
  #addProviderTiles("Esri.WorldImagery", group = 'Esri Imagery') |>
  setView(lng = lon, lat = lat, zoom = 10) 


# emp <- readabs::read_abs_series(c('A84423354L', 'A84423690X'))
# save(data/emp, file = "emp.RData")
load("data/emp.RData")

# emp_region <- readabs::read_abs_series(c(
#   "A84599659L",  
#   "A84600019W",
#   "A84600187J", 
#   "A84599557X",
#   "A84600115W",  
#   "A84599851L",
#   "A84599923L",  
#   "A84600025T",
#   "A84600193C",  
#   "A84599665J",
#   "A84600031L",  
#   "A84599671C",
#   "A84599677T",  
#   "A84599683L",
#   "A84599929A",  
#   "A84600121T",
#   "A84600037A"
# ))
# save(data/emp_region, file = "emp_region.RData")
load("data/emp_region.RData")

sa4 <- sf::read_sf("data/SA4_2021_AUST_GDA2020.shp") |>
  dplyr::filter(STE_NAME21 == "Victoria",
                !(SA4_CODE21 %in% c("297", "299")))

regional_emp <- emp_region |>
  tidyr::separate(series, c("SA4_NAME21", "indicator", "persons"), sep = ";") |>
  dplyr::mutate(SA4_NAME21 = gsub(">>>|Victoria - ", "", SA4_NAME21) |> trimws("both")) |>
  dplyr::arrange(series_id, date) |>
  dplyr::mutate(value = slider::slide_mean(value, before = 2) |> round(1)) |>
  dplyr::filter(date == max(date))

regional_employment <- left_join(sa4, regional_emp)
  
```





## Introduction


- trained as a freshwater ecologist
- using R and python for almost 20 years
- Data Analyst for last 10 years
- worked for Monash University, EPA and DJSIR




## Department of Jobs Skills and Industry 


- data analysis
- economic analysis
- data driven web content



![](https://djsir.vic.gov.au/__data/assets/image/0003/1750152/logo-djsir-black.png){.absolute bottom=0 right=50 width="219" height="66"}



## Creative Industries {background-color="white"}


:::: {.v-center-container}
<iframe src="https://creative.vic.gov.au/__data/assets/git_bridge/0003/2168544/landing_employment.html" scrolling="yes" style="height: 579px;" width="80%"></iframe>
::::






## Creative Industries {background-color="white"}


:::: {.v-center-container}
<iframe src="https://creative.vic.gov.au/__data/assets/git_bridge/0003/2168544/business02_totshare.html" scrolling="yes" style="height: 434px;" width="100%"></iframe>
::::




## Victorian tourism {background-color="white"}

:::: {.v-center-container}
<iframe src="https://tourism.vic.gov.au/__data/assets/git_bridge/0007/2144194/total_charts_02.html" title="Domestic day data" style="height: 420px;" width="80%"></iframe>
::::




## Victorian tourism {background-color="white"}

:::: {.v-center-container}
<iframe src="https://tourism.vic.gov.au/__data/assets/git_bridge/0007/2144194/total_jumbo.html" title="Victorian tourism overview data" style="height: 400px;" width="100%"></iframe>
::::




## Victorian tourism {background-color="white"}

:::: {.v-center-container}
<iframe src="https://tourism.vic.gov.au/__data/assets/git_bridge/0007/2144194/dashboard_tourism_visitors.html" title="Tourism visitors summary widget" style="height: 567px;" width="100%"></iframe>
::::







## Why R for Data Visualisation



:::: {.columns}


::: {.column width="60%"}

R is not just for statistics

::: {.fragment .fade-in-then-out fragment-index=1}

* Active Community
* Extensive capabilities
* structured way to organise work
* Diverse reporting and web capabilities

:::



:::

::: {.column width="40%"}

:::: {.absolute bottom=0}
![](img/Rlogo.svg){fig-align="center"}

::::


:::

::::




## Why R for Data Visualisation



:::: {.columns}


::: {.column width="60%"}

R is not just for statistics



::: {.fragment fragment-index=1}

- charting libraries
- publication frameworks
  * rmarkdown
  * quarto
  * shiny
  
:::

:::

::: {.column width="40%"}

:::: {.absolute bottom=0}
![](img/Rlogo.svg){fig-align="center"}

::::


:::

::::







## Charting Libraries


:::: {.columns}


::: {.column width="40%"}


::: {.fragment fragment-index=1}
- ggplot2
:::

::: {.fragment fragment-index=2}
- highcharter
:::

::: {.fragment fragment-index=3}
- leaflet
:::


:::

::: {.column width="60%"}

::: {.fragment .fade-in-then-out fragment-index=1 }
<img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/ggplot2.png" 
     align="right" 
     width="200" 
     style="max-width: 100%;">
:::

::: {.fragment .fade-in-then-out fragment-index=2}
<img src="https://jkunst.com/highcharter/logo.png" 
     align="right" 
     width="200" 
     style="max-width: 100%;">
:::

::: {.fragment .fade-in-then-out fragment-index=3}
leaflet image
:::




:::

::::




## ggplot2



```{r}
#| echo: true

gg_emp <- emp |>
  ggplot(aes(x = date, y = value, colour = series_type)) +
  geom_line() +
  labs(
    title = "Victorian unemployment rate", 
    subtitle = paste0("Data from ", format(min(emp$date), "%B %Y")),
    y = "unemployment rate", x = "") 
```


```{r}
#| fig-width: 14
#| fig-height: 5
#| fig-align: center
gg_emp
```


## ggplot maps

```{r}
gg_map <- regional_emp |>
  ggplot(aes(fill = value)) +
  geom_sf()
```


## highcharter



```{r}
#| echo: true
hc_emp <- emp |>
  hchart(hcaes(x = date, y = value, group = series_type), type = "line") |>
  hc_title(text = "Victorian unemployment rate") |>
  hc_subtitle(text = paste0("Data from ", format(min(emp$date), "%B %Y"))) |>
  hc_xAxis(title = list(text = NULL)) |>
  hc_yAxis(title = list(text = "unemployment rate"))
```


```{r}
hc_emp |>
  hc_size(height = 300) |>
  hc_add_theme(hc_theme_ggplot2())
```



## Links

[https://ggplot2.tidyverse.org/index.html](https://ggplot2.tidyverse.org/index.html)

[https://jkunst.com/highcharter/](https://jkunst.com/highcharter/)





## Quarto

Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <https://quarto.org>.

```{r}
1 + 1
```
